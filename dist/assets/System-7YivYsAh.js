import{_ as Z}from"./_plugin-vue_export-helper--ScQKs0c.js";/* empty css                 */import{i as I,L as G}from"./index-CthE2ViS.js";/* empty css               *//* empty css                     *//* empty css                */import{r as i,p as j,J as q,c as k,o as V,d as e,w as l,L as H,f as W,P as ee,Q as te,s as le,M as ae,E as se,b as r,a3 as oe,G as c,K as re,O as ne,R as ie,T as ue,U as ce,V as de,l as d,k as me,X as pe,i as ve,Y as _e,Z as fe,_ as ge,n as he}from"./index-CBu6_2cB.js";const be={class:"monitor-container"},ye={class:"stat-content"},we={class:"stat-symbol"},Ce={class:"stat-info"},xe={class:"value"},Ee={class:"card-header"},Ae={class:"chart-container"},Se={class:"card-header"},Ve={class:"chart-container"},ze={class:"card-header"},Le={class:"pagination-container"},ke={key:0,class:"alert-detail-content"},Ue={__name:"System",setup(De){const N=i([{title:"CPU使用率",value:"32%",desc:"较昨日 ↑2%",color:"#409EFF"},{title:"内存使用",value:"4.2/16GB",desc:"较昨日 ↓0.5GB",color:"#67C23A"},{title:"在线设备",value:"42",desc:"较昨日 ↑3",color:"#E6A23C"},{title:"告警数量",value:"5",desc:"较昨日 ↓2",color:"#F56C6C"}]),b=i("1h"),U=i(null),D=i(null),y=i([{time:"2023-05-15 08:30:22",level:"critical",source:"服务器-001",message:"CPU使用率超过90%持续5分钟"},{time:"2023-05-15 08:25:10",level:"warning",source:"数据库-002",message:"连接数达到上限的85%"},{time:"2023-05-15 08:20:05",level:"normal",source:"网络设备-003",message:"接口eth0流量异常波动"},{time:"2023-05-15 08:15:33",level:"critical",source:"存储设备-004",message:"磁盘空间不足，剩余5%"},{time:"2023-05-15 08:10:18",level:"warning",source:"应用服务-005",message:"响应时间超过阈值"},{time:"2023-05-15 08:05:42",level:"normal",source:"服务器-002",message:"内存使用率达到75%"},{time:"2023-05-15 08:00:15",level:"normal",source:"数据库-001",message:"慢查询数量增加"}]),w=i(""),C=i(""),x=i(1),E=i(10),g=i(!1),n=i(null),O=j(()=>{let s=y.value;if(w.value){const t=w.value.toLowerCase();s=s.filter(u=>u.source.toLowerCase().includes(t)||u.message.toLowerCase().includes(t))}return C.value&&(s=s.filter(t=>t.level===C.value)),s.slice((x.value-1)*E.value,x.value*E.value)}),M=s=>{switch(s){case"critical":return"danger";case"warning":return"warning";default:return""}},T=s=>{switch(s){case"critical":return"严重";case"warning":return"警告";default:return"一般"}},R=s=>{switch(s){case"critical":return"请立即处理，系统稳定性受到严重影响";case"warning":return"建议尽快处理，避免问题升级";default:return"可安排时间处理，持续关注"}},$=s=>{switch(s){case"CPU使用率":return"CPU";case"内存使用":return"RAM";case"在线设备":return"DEV";case"告警数量":return"ALM";default:return""}},J=s=>s.includes("↑")?"up-trend":s.includes("↓")?"down-trend":"",K=s=>{n.value=s,g.value=!0},Q=()=>{n.value&&(y.value=y.value.filter(s=>s!==n.value),g.value=!1,he.success("告警已标记为已处理"))},P=()=>{B()},B=()=>{const s=(o,v,A)=>Array.from({length:A},(_,S)=>{const f=S*(24/A),z=`${Math.floor(f).toString().padStart(2,"0")}:${Math.floor(f%1*60).toString().padStart(2,"0")}`,L=o+Math.random()*v-v/2;return{time:z,value:Math.round(L*10)/10}}),t=s(35,20,12),u=I(U.value);u.setOption({tooltip:{trigger:"axis",formatter:"{b}<br/>使用率: {c}%"},xAxis:{type:"category",data:t.map(o=>o.time),axisLabel:{interval:Math.floor(t.length/6)-1}},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},series:[{data:t.map(o=>o.value),type:"line",smooth:!0,areaStyle:{color:new G(0,0,0,1,[{offset:0,color:"rgba(64, 158, 255, 0.5)"},{offset:1,color:"rgba(64, 158, 255, 0.1)"}])},lineStyle:{width:3,color:"#409EFF"},symbol:"circle",symbolSize:8,markLine:{silent:!0,data:[{yAxis:80,name:"警告阈值"}],lineStyle:{color:"#E6A23C",type:"dashed"},label:{position:"end",formatter:"警告阈值: 80%"}}}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0}});const m=s(25,15,12),p=I(D.value);p.setOption({tooltip:{trigger:"axis",formatter:"{b}<br/>使用率: {c}%"},xAxis:{type:"category",data:m.map(o=>o.time),axisLabel:{interval:Math.floor(m.length/6)-1}},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},series:[{data:m.map(o=>o.value),type:"line",smooth:!0,areaStyle:{color:new G(0,0,0,1,[{offset:0,color:"rgba(103, 194, 58, 0.5)"},{offset:1,color:"rgba(103, 194, 58, 0.1)"}])},lineStyle:{width:3,color:"#67C23A"},symbol:"circle",symbolSize:8,markLine:{silent:!0,data:[{yAxis:70,name:"警告阈值"}],lineStyle:{color:"#E6A23C",type:"dashed"},label:{position:"end",formatter:"警告阈值: 70%"}}}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0}}),window.addEventListener("resize",()=>{u.resize(),p.resize()})};return q(()=>{B()}),(s,t)=>{const u=se,m=ae,p=H,o=ie,v=ne,A=ve,_=ce,S=de,f=me,z=ue,L=pe,h=ge,X=fe,Y=W;return V(),k("div",be,[e(p,{gutter:20,class:"stats-row"},{default:l(()=>[(V(!0),k(ee,null,te(N.value,(a,F)=>(V(),le(m,{span:6,key:F},{default:l(()=>[e(u,{shadow:"hover",class:"stat-card"},{default:l(()=>[r("div",ye,[r("div",{class:"stat-icon",style:oe({backgroundColor:a.color})},[r("span",we,c($(a.title)),1)],4),r("div",Ce,[r("h3",null,c(a.title),1),r("p",xe,c(a.value),1),r("p",{class:re(["desc",J(a.desc)])},c(a.desc),3)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(p,{gutter:20,class:"chart-row"},{default:l(()=>[e(m,{span:12},{default:l(()=>[e(u,{shadow:"hover",class:"chart-card"},{header:l(()=>[r("div",Ee,[t[8]||(t[8]=r("span",null,"系统资源使用率",-1)),e(v,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=a=>b.value=a),size:"small",style:{width:"120px"},onChange:P},{default:l(()=>[e(o,{label:"最近1小时",value:"1h"}),e(o,{label:"最近24小时",value:"24h"}),e(o,{label:"最近7天",value:"7d"})]),_:1},8,["modelValue"])])]),default:l(()=>[r("div",Ae,[r("div",{ref_key:"cpuChart",ref:U,class:"chart"},null,512)])]),_:1})]),_:1}),e(m,{span:12},{default:l(()=>[e(u,{shadow:"hover",class:"chart-card"},{header:l(()=>[r("div",Se,[t[9]||(t[9]=r("span",null,"内存使用情况",-1)),e(v,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=a=>b.value=a),size:"small",style:{width:"120px"},onChange:P},{default:l(()=>[e(o,{label:"最近1小时",value:"1h"}),e(o,{label:"最近24小时",value:"24h"}),e(o,{label:"最近7天",value:"7d"})]),_:1},8,["modelValue"])])]),default:l(()=>[r("div",Ve,[r("div",{ref_key:"memoryChart",ref:D,class:"chart"},null,512)])]),_:1})]),_:1})]),_:1}),e(p,{class:"alert-row"},{default:l(()=>[e(m,{span:24},{default:l(()=>[e(u,{shadow:"hover",class:"alert-card"},{header:l(()=>[r("div",ze,[t[10]||(t[10]=r("span",null,"告警信息",-1)),r("div",null,[e(A,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=a=>w.value=a),placeholder:"搜索告警",size:"small",style:{width:"200px","margin-right":"10px"},clearable:""},null,8,["modelValue"]),e(v,{modelValue:C.value,"onUpdate:modelValue":t[3]||(t[3]=a=>C.value=a),placeholder:"告警级别",size:"small",style:{width:"120px"},clearable:""},{default:l(()=>[e(o,{label:"严重",value:"critical"}),e(o,{label:"警告",value:"warning"}),e(o,{label:"一般",value:"normal"})]),_:1},8,["modelValue"])])])]),default:l(()=>[e(z,{data:O.value,style:{width:"100%"},height:"300"},{default:l(()=>[e(_,{prop:"time",label:"时间",width:"180"}),e(_,{prop:"level",label:"级别",width:"120"},{default:l(({row:a})=>[e(S,{type:M(a.level),size:"small"},{default:l(()=>[d(c(T(a.level)),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"source",label:"来源",width:"150"}),e(_,{prop:"message",label:"内容"}),e(_,{label:"操作",width:"120"},{default:l(({row:a})=>[e(f,{size:"small",type:"text",onClick:F=>K(a)},{default:l(()=>[...t[11]||(t[11]=[d("详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),r("div",Le,[e(L,{"current-page":x.value,"onUpdate:currentPage":t[4]||(t[4]=a=>x.value=a),"page-size":E.value,"onUpdate:pageSize":t[5]||(t[5]=a=>E.value=a),"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",total:y.value.length},null,8,["current-page","page-size","total"])])]),_:1})]),_:1})]),_:1}),e(Y,{modelValue:g.value,"onUpdate:modelValue":t[7]||(t[7]=a=>g.value=a),title:n.value?n.value.source+"告警详情":"",width:"50%"},{footer:l(()=>[e(f,{onClick:t[6]||(t[6]=a=>g.value=!1)},{default:l(()=>[...t[12]||(t[12]=[d("关闭",-1)])]),_:1}),e(f,{type:"primary",onClick:Q},{default:l(()=>[...t[13]||(t[13]=[d("标记为已处理",-1)])]),_:1})]),default:l(()=>[n.value?(V(),k("div",ke,[e(X,{column:1,border:""},{default:l(()=>[e(h,{label:"告警时间"},{default:l(()=>[d(c(n.value.time),1)]),_:1}),e(h,{label:"告警级别"},{default:l(()=>[e(S,{type:M(n.value.level),size:"small"},{default:l(()=>[d(c(T(n.value.level)),1)]),_:1},8,["type"])]),_:1}),e(h,{label:"告警来源"},{default:l(()=>[d(c(n.value.source),1)]),_:1}),e(h,{label:"告警内容"},{default:l(()=>[d(c(n.value.message),1)]),_:1}),e(h,{label:"处理建议"},{default:l(()=>[d(c(R(n.value.level)),1)]),_:1})]),_:1})])):_e("",!0)]),_:1},8,["modelValue","title"])])}}},Ne=Z(Ue,[["__scopeId","data-v-01dd7660"]]);export{Ne as default};
