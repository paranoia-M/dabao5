import{_ as ie}from"./_plugin-vue_export-helper--ScQKs0c.js";/* empty css                   *//* empty css                 */import{i as j,L as H,g as J}from"./index-CthE2ViS.js";/* empty css               *//* empty css                     *//* empty css                *//* empty css                    */import{r as i,J as ue,a2 as ce,I as de,c as P,o as x,d as t,w as a,E as pe,L as me,f as ve,b as o,V as fe,l as n,P as ge,Q as _e,s as K,M as he,G as r,m as ye,K as be,S as Ce,k as xe,T as we,U as Se,W as ze,X as Ee,O as Ae,R as Le,Y as Me,Z as Te,_ as Ve,n as $,a1 as ke}from"./index-CBu6_2cB.js";const De={class:"monitor-container"},Be={class:"header"},Ue={class:"metric-card"},Ie={class:"metric-value"},Pe={class:"metric-title"},$e={class:"metric-footer"},Oe={class:"status-text"},Re={class:"header"},Ge={class:"header-actions"},Ne={class:"header"},Fe={class:"chart-container"},je={class:"header"},He={class:"chart-container"},Je={key:0,class:"alert-detail-content"},Ke={class:"alert-actions"},Qe={class:"stats-content"},We={__name:"Report",setup(Xe){const Q=i([{title:"CPU使用率",value:"32%",percentage:32,status:"success"},{title:"内存使用",value:"5.2/16GB",percentage:32.5,status:"success"},{title:"磁盘空间",value:"1.2/2TB",percentage:60,status:"warning"},{title:"网络流量",value:"256Mbps",percentage:64,status:"success"}]),m=i([{id:1,time:"2023-05-15 08:23:45",level:"警告",source:"服务器A",message:"CPU使用率超过80%"},{id:2,time:"2023-05-15 08:15:32",level:"严重",source:"数据库B",message:"连接数达到上限"},{id:3,time:"2023-05-15 07:58:12",level:"一般",source:"网络设备C",message:"端口异常波动"},{id:4,time:"2023-05-15 07:42:56",level:"警告",source:"服务器D",message:"内存使用率超过75%"},{id:5,time:"2023-05-15 07:30:18",level:"一般",source:"应用服务E",message:"响应时间超过阈值"}]),y=i(!1),A=i(1),L=i(10),w=i(25),f=i("1h"),g=i("1h"),M=i(null),T=i(null),b=i(!1),V=i(!1),u=i(null),W=l=>({success:"正常",warning:"警告",danger:"危险"})[l]||"未知",O=l=>{switch(l){case"严重":return"danger";case"警告":return"warning";default:return""}},X=l=>{u.value=l,b.value=!0},Y=()=>{V.value=!0},R=l=>{ke.confirm(`确认要将该告警标记为已处理吗？<br>${l.message}`,"处理告警",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(()=>{const e=m.value.findIndex(v=>v.id===l.id);e!==-1&&(m.value.splice(e,1),w.value-=1,$.success("告警已处理"),b.value=!1)}).catch(()=>{$.info("已取消操作")})},Z=()=>{y.value=!0,setTimeout(()=>{const l={id:Date.now(),time:new Date().toLocaleString(),level:["一般","警告","严重"][Math.floor(Math.random()*3)],source:["服务器A","数据库B","网络设备C","应用服务D"][Math.floor(Math.random()*4)],message:["CPU使用率高","内存泄漏","磁盘空间不足","网络延迟高"][Math.floor(Math.random()*4)]};m.value.unshift(l),w.value+=1,y.value=!1,$.success("告警数据已刷新")},800)},q=l=>{L.value=l,k()},ee=l=>{A.value=l,k()},k=()=>{y.value=!0,setTimeout(()=>{y.value=!1},500)},D=()=>{const l={"1h":[20,25,30,45,40,35,50],"6h":[15,20,25,30,35,40,45,50,55,60,65,70],"24h":[10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,85,80,75,70,65,60,55]};te(l[f.value]||l["1h"])},B=()=>{const l={"1h":[25,30,28,35,40,38,45],"6h":[20,25,30,35,40,45,50,55,60,65,70,75],"24h":[15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,80,75,70,65,60,55,50,45,40]};ae(l[g.value]||l["1h"])},te=l=>{const e=J(M.value);e&&e.setOption({xAxis:{data:S(f.value)},series:[{data:l}]})},ae=l=>{const e=J(T.value);e&&e.setOption({xAxis:{data:S(g.value)},series:[{data:l}]})},S=l=>{const e=l==="1h"?7:l==="6h"?12:24,v=l==="1h"?10:l==="6h"?30:60,z=[];for(let d=0;d<e;d++){const _=d*v,E=Math.floor(_/60),p=_%60;z.push(`${String(E).padStart(2,"0")}:${String(p).padStart(2,"0")}`)}return z},U=l=>m.value.filter(e=>e.level===l).length,le=()=>m.value.length===0?"无告警":m.value[0].time,se=()=>{const l=j(M.value);l.setOption({tooltip:{trigger:"axis",formatter:"{b}<br/>使用率: {c}%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:S("1h"),axisLine:{lineStyle:{color:"#999"}}},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"},splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"CPU使用率",data:[20,25,30,45,40,35,50],type:"line",smooth:!0,symbol:"circle",symbolSize:8,lineStyle:{width:3},areaStyle:{color:new H(0,0,0,1,[{offset:0,color:"rgba(64, 158, 255, 0.5)"},{offset:1,color:"rgba(64, 158, 255, 0.1)"}])},itemStyle:{color:"#409EFF"}}]});const e=j(T.value);e.setOption({tooltip:{trigger:"axis",formatter:"{b}<br/>使用率: {c}%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:S("1h"),axisLine:{lineStyle:{color:"#999"}}},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"},splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"内存使用率",data:[25,30,28,35,40,38,45],type:"line",smooth:!0,symbol:"circle",symbolSize:8,lineStyle:{width:3},areaStyle:{color:new H(0,0,0,1,[{offset:0,color:"rgba(103, 194, 58, 0.5)"},{offset:1,color:"rgba(103, 194, 58, 0.1)"}])},itemStyle:{color:"#67C23A"}}]}),window.addEventListener("resize",()=>{l.resize(),e.resize()})};return ue(()=>{ce(()=>{se(),k(),D(),B()})}),de([f,g],()=>{f.value&&D(),g.value&&B()}),(l,e)=>{const v=fe,z=ye,d=pe,_=he,E=me,p=xe,C=Se,oe=we,ne=Ee,h=Le,G=Ae,c=Ve,N=Te,F=ve,re=ze;return x(),P("div",De,[t(d,{class:"status-overview",shadow:"never"},{default:a(()=>[o("div",Be,[e[9]||(e[9]=o("h2",{class:"title"},"系统状态概览",-1)),t(v,{type:"success",effect:"light",class:"status-tag"},{default:a(()=>[...e[8]||(e[8]=[n("运行正常",-1)])]),_:1})]),t(E,{gutter:20,class:"metrics-row"},{default:a(()=>[(x(!0),P(ge,null,_e(Q.value,(s,I)=>(x(),K(_,{span:6,key:I},{default:a(()=>[t(d,{shadow:"hover",class:"metric-card-wrapper"},{default:a(()=>[o("div",Ue,[o("div",Ie,r(s.value),1),o("div",Pe,r(s.title),1),t(z,{percentage:s.percentage,status:s.status,"stroke-width":10,class:"metric-progress","show-text":!1},null,8,["percentage","status"]),o("div",$e,[o("span",{class:be(["status-dot",s.status])},null,2),o("span",Oe,r(W(s.status)),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(d,{class:"alert-section",shadow:"never"},{default:a(()=>[o("div",Re,[e[12]||(e[12]=o("h2",{class:"title"},"告警信息",-1)),o("div",Ge,[t(p,{type:"primary",size:"small",onClick:Z,plain:""},{default:a(()=>[...e[10]||(e[10]=[o("span",{class:"button-text"},"刷新数据",-1)])]),_:1}),t(p,{size:"small",onClick:Y,plain:""},{default:a(()=>[...e[11]||(e[11]=[o("span",{class:"button-text"},"统计信息",-1)])]),_:1})])]),Ce((x(),K(oe,{data:m.value,style:{width:"100%"},class:"alert-table",stripe:"",border:""},{default:a(()=>[t(C,{prop:"time",label:"告警时间",width:"180",align:"center"}),t(C,{prop:"level",label:"告警级别",width:"120",align:"center"},{default:a(({row:s})=>[t(v,{type:O(s.level),effect:"light",size:"small"},{default:a(()=>[n(r(s.level),1)]),_:2},1032,["type"])]),_:1}),t(C,{prop:"source",label:"告警来源",width:"150",align:"center"}),t(C,{prop:"message",label:"告警内容","min-width":"200"}),t(C,{label:"操作",width:"150",align:"center",fixed:"right"},{default:a(({row:s})=>[t(p,{size:"small",onClick:I=>X(s),plain:""},{default:a(()=>[...e[13]||(e[13]=[n("详情",-1)])]),_:1},8,["onClick"]),t(p,{size:"small",type:"primary",onClick:I=>R(s)},{default:a(()=>[...e[14]||(e[14]=[n("处理",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[re,y.value]]),t(ne,{"current-page":A.value,"onUpdate:currentPage":e[0]||(e[0]=s=>A.value=s),"page-size":L.value,"onUpdate:pageSize":e[1]||(e[1]=s=>L.value=s),"page-sizes":[10,20,30,50],small:!0,layout:"total, sizes, prev, pager, next, jumper",total:w.value,onSizeChange:q,onCurrentChange:ee,class:"pagination"},null,8,["current-page","page-size","total"])]),_:1}),t(E,{gutter:20,class:"chart-row"},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(d,{shadow:"never"},{default:a(()=>[o("div",Ne,[e[15]||(e[15]=o("h3",{class:"chart-title"},"CPU使用率趋势",-1)),t(G,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),size:"small",style:{width:"120px"},onChange:D},{default:a(()=>[t(h,{label:"1小时",value:"1h"}),t(h,{label:"6小时",value:"6h"}),t(h,{label:"24小时",value:"24h"})]),_:1},8,["modelValue"])]),o("div",Fe,[o("div",{ref_key:"cpuChart",ref:M,style:{height:"300px"}},null,512)])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(d,{shadow:"never"},{default:a(()=>[o("div",je,[e[16]||(e[16]=o("h3",{class:"chart-title"},"内存使用率趋势",-1)),t(G,{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=s=>g.value=s),size:"small",style:{width:"120px"},onChange:B},{default:a(()=>[t(h,{label:"1小时",value:"1h"}),t(h,{label:"6小时",value:"6h"}),t(h,{label:"24小时",value:"24h"})]),_:1},8,["modelValue"])]),o("div",He,[o("div",{ref_key:"memoryChart",ref:T,style:{height:"300px"}},null,512)])]),_:1})]),_:1})]),_:1}),t(F,{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=s=>b.value=s),title:u.value?"告警详情 - "+u.value.message:"告警详情",width:"600px"},{default:a(()=>[u.value?(x(),P("div",Je,[t(N,{column:1,border:""},{default:a(()=>[t(c,{label:"告警ID"},{default:a(()=>[n(r(u.value.id),1)]),_:1}),t(c,{label:"告警时间"},{default:a(()=>[n(r(u.value.time),1)]),_:1}),t(c,{label:"告警级别"},{default:a(()=>[t(v,{type:O(u.value.level),size:"small"},{default:a(()=>[n(r(u.value.level),1)]),_:1},8,["type"])]),_:1}),t(c,{label:"告警来源"},{default:a(()=>[n(r(u.value.source),1)]),_:1}),t(c,{label:"详细内容"},{default:a(()=>[n(r(u.value.message),1)]),_:1})]),_:1}),o("div",Ke,[t(p,{type:"primary",onClick:e[4]||(e[4]=s=>R(u.value))},{default:a(()=>[...e[17]||(e[17]=[n("标记为已处理",-1)])]),_:1}),t(p,{onClick:e[5]||(e[5]=s=>b.value=!1)},{default:a(()=>[...e[18]||(e[18]=[n("关闭",-1)])]),_:1})])])):Me("",!0)]),_:1},8,["modelValue","title"]),t(F,{modelValue:V.value,"onUpdate:modelValue":e[7]||(e[7]=s=>V.value=s),title:"告警统计信息",width:"500px"},{default:a(()=>[o("div",Qe,[t(N,{column:1,border:""},{default:a(()=>[t(c,{label:"总告警数"},{default:a(()=>[n(r(w.value),1)]),_:1}),t(c,{label:"严重告警"},{default:a(()=>[n(r(U("严重"))+" 条 ",1)]),_:1}),t(c,{label:"警告告警"},{default:a(()=>[n(r(U("警告"))+" 条 ",1)]),_:1}),t(c,{label:"一般告警"},{default:a(()=>[n(r(U("一般"))+" 条 ",1)]),_:1}),t(c,{label:"最近告警时间"},{default:a(()=>[n(r(le()),1)]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}},nt=ie(We,[["__scopeId","data-v-eca578c1"]]);export{nt as default};
