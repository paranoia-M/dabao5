import{_ as ae}from"./_plugin-vue_export-helper--ScQKs0c.js";/* empty css                   *//* empty css                   *//* empty css                     *//* empty css               *//* empty css                        *//* empty css                  *//* empty css                 *//* empty css                  */import{r as m,m as A,z as le,a2 as te,c as oe,o as I,d as p,U as se,e as a,w as o,Y as ne,i as ue,j as re,X as ie,H as de,L as me,O as pe,f as ve,k as f,M as ce,N as fe,D as ge,a1 as we,g as be,h as _e,a3 as D,J as he,K as Ve,l as v,_ as ye}from"./index-Dr9TPxTp.js";const Ce={class:"user-management-container"},Ue={class:"header"},$e={class:"operation-area"},xe={class:"pagination-container"},ke={class:"password-strength"},De={class:"dialog-footer"},Ee={class:"dialog-footer"},Le={__name:"UserManagement",setup(Se){const E=Array.from({length:50},(l,e)=>({id:e+1,username:`user${e+1}`,email:`user${e+1}@example.com`,role:["admin","operator","auditor"][Math.floor(Math.random()*3)],status:Math.random()>.3?"active":"inactive",lastLogin:new Date(Date.now()-Math.floor(Math.random()*7*24*60*60*1e3)).toLocaleString()})),N=[{time:new Date().toLocaleString(),action:"æ·»åŠ ç”¨æˆ·",operator:"admin",target:"user51",details:"æ·»åŠ äº†æ–°ç”¨æˆ·user51ï¼Œè§’è‰²ä¸ºæ“ä½œå‘˜"},{time:new Date(Date.now()-1e3*60*5).toLocaleString(),action:"ä¿®æ”¹çŠ¶æ€",operator:"admin",target:"user12",details:"å°†ç”¨æˆ·user12çŠ¶æ€ä¿®æ”¹ä¸ºç¦ç”¨"},{time:new Date(Date.now()-1e3*60*30).toLocaleString(),action:"åˆ é™¤ç”¨æˆ·",operator:"auditor1",target:"user7",details:"åˆ é™¤äº†ç”¨æˆ·user7"}],i=m([]),U=m(!1),_=m(""),g=m(1),h=m(10),$=m(0),V=m(!1),y=m(!1),L=m(!1),S=m(N),n=m({username:"",email:"",password:"",role:"operator"}),s=m({id:0,username:"",email:"",password:"",role:"",status:"active"}),x=A(()=>n.value.password?n.value.password.length<6?"weak":n.value.password.length<10?"medium":"strong":""),F=A(()=>{let l=i.value;if(_.value){const d=_.value.toLowerCase();l=l.filter(r=>r.username.toLowerCase().includes(d)||r.email.toLowerCase().includes(d))}$.value=l.length;const e=(g.value-1)*h.value,u=e+h.value;return l.slice(e,u)}),j=()=>{U.value=!0,setTimeout(()=>{i.value=E,$.value=E.length,U.value=!1,w("æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨","ç³»ç»Ÿ","","åŠ è½½äº†æ‰€æœ‰ç”¨æˆ·æ•°æ®")},800)},z=()=>{g.value=1,w("æœç´¢ç”¨æˆ·","ç³»ç»Ÿ","",`æœç´¢å…³é”®è¯: ${_.value}`)},K=()=>{g.value=1},P=l=>{h.value=l},O=l=>{g.value=l},R=()=>{if(!n.value.username||!n.value.email||!n.value.password){v.warning("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯");return}if(i.value.some(e=>e.username===n.value.username)){v.warning("ç”¨æˆ·åå·²å­˜åœ¨");return}if(i.value.some(e=>e.email===n.value.email)){v.warning("é‚®ç®±å·²è¢«æ³¨å†Œ");return}const l={id:i.value.length+1,username:n.value.username,email:n.value.email,role:n.value.role,status:"active",lastLogin:new Date().toLocaleString()};i.value.unshift(l),V.value=!1,v.success("æ·»åŠ ç”¨æˆ·æˆåŠŸ"),w("æ·»åŠ ç”¨æˆ·","admin",l.username,`æ·»åŠ äº†æ–°ç”¨æˆ·: ${l.username}, è§’è‰²: ${l.role}`),n.value={username:"",email:"",password:"",role:"operator"}},H=l=>{s.value={id:l.id,username:l.username,email:l.email,password:"",role:l.role,status:l.status},y.value=!0},J=()=>{if(!s.value.email){v.warning("è¯·å¡«å†™é‚®ç®±");return}const l=i.value.findIndex(e=>e.id===s.value.id);if(l!==-1){const e={...i.value[l]};i.value[l].email=s.value.email,i.value[l].role=s.value.role,i.value[l].status=s.value.status,s.value.password&&v.success("å¯†ç å·²æ›´æ–°"),y.value=!1,v.success("ç”¨æˆ·ä¿¡æ¯å·²æ›´æ–°");let u=[];e.email!==s.value.email&&u.push(`é‚®ç®±ä» ${e.email} æ”¹ä¸º ${s.value.email}`),e.role!==s.value.role&&u.push(`è§’è‰²ä» ${e.role} æ”¹ä¸º ${s.value.role}`),e.status!==s.value.status&&u.push(`çŠ¶æ€ä» ${e.status} æ”¹ä¸º ${s.value.status}`),s.value.password&&u.push("å¯†ç å·²ä¿®æ”¹"),u.length>0&&w("ä¿®æ”¹ç”¨æˆ·","admin",s.value.username,u.join("; "))}},Q=l=>{ye.confirm(`ç¡®å®šè¦åˆ é™¤ç”¨æˆ· ${l.username} å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`,"å®‰å…¨è­¦å‘Š",{confirmButtonText:"ç¡®è®¤åˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning",customClass:"security-confirm"}).then(()=>{i.value=i.value.filter(e=>e.id!==l.id),v.success("ç”¨æˆ·å·²åˆ é™¤"),w("åˆ é™¤ç”¨æˆ·","admin",l.username,`åˆ é™¤äº†ç”¨æˆ· ${l.username}`)}).catch(()=>{v.info("å·²å–æ¶ˆåˆ é™¤")})},X=l=>{v.success(`ç”¨æˆ· ${l.username} çŠ¶æ€å·²æ›´æ–°ä¸º ${l.status==="active"?"å¯ç”¨":"ç¦ç”¨"}`),w("ä¿®æ”¹çŠ¶æ€","admin",l.username,`å°†ç”¨æˆ·çŠ¶æ€ä¿®æ”¹ä¸º ${l.status}`)},Y=l=>{switch(l){case"admin":return"danger";case"operator":return"primary";case"auditor":return"warning";default:return"info"}},G=({row:l})=>l.status==="inactive"?"inactive-row":"",w=(l,e,u,d)=>{S.value.unshift({time:new Date().toLocaleString(),action:l,operator:e,target:u,details:d})};return le(()=>{j()}),te(()=>n.value.password,l=>{l&&l.length>0}),(l,e)=>{const u=re,d=ue,r=ce,W=fe,M=we,T=me,Z=pe,c=_e,b=Ve,q=he,B=be,k=ve,ee=ie;return I(),oe("div",Ce,[p("div",Ue,[e[20]||(e[20]=p("h2",{class:"system-title"},"ç½‘ç»œå®‰å…¨ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ",-1)),p("div",$e,[a(d,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),placeholder:"æœç´¢ç”¨æˆ·åæˆ–é‚®ç®±",clearable:"",style:{width:"300px"},onClear:K,onKeyup:ne(z,["enter"]),class:"security-search"},{append:o(()=>[a(u,{onClick:z,class:"search-btn"},{default:o(()=>[...e[18]||(e[18]=[p("span",{class:"search-icon"},"ğŸ”",-1)])]),_:1})]),_:1},8,["modelValue"]),a(u,{type:"primary",onClick:e[1]||(e[1]=t=>V.value=!0),class:"add-user-btn"},{default:o(()=>[...e[19]||(e[19]=[p("span",{class:"btn-icon"},"+",-1),f(" æ·»åŠ ç”¨æˆ· ",-1)])]),_:1})])]),se((I(),de(T,{data:F.value,border:"",style:{width:"100%"},"row-class-name":G,class:"security-table"},{default:o(()=>[a(r,{prop:"id",label:"ID",width:"80",align:"center"}),a(r,{prop:"username",label:"ç”¨æˆ·å",width:"120"}),a(r,{prop:"email",label:"é‚®ç®±",width:"200"}),a(r,{prop:"role",label:"è§’è‰²",width:"120"},{default:o(t=>[a(W,{type:Y(t.row.role),effect:"light"},{default:o(()=>[f(ge(t.row.role),1)]),_:2},1032,["type"])]),_:1}),a(r,{prop:"status",label:"çŠ¶æ€",width:"100",align:"center"},{default:o(t=>[a(M,{modelValue:t.row.status,"onUpdate:modelValue":C=>t.row.status=C,"active-value":"active","inactive-value":"inactive","active-text":"å¯ç”¨","inactive-text":"ç¦ç”¨",onChange:C=>X(t.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(r,{prop:"lastLogin",label:"æœ€åç™»å½•",width:"180"}),a(r,{label:"æ“ä½œ",width:"180",fixed:"right",align:"center"},{default:o(t=>[a(u,{size:"small",onClick:C=>H(t.row),class:"edit-btn"},{default:o(()=>[...e[21]||(e[21]=[f("âœï¸ ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),a(u,{size:"small",type:"danger",onClick:C=>Q(t.row),class:"delete-btn"},{default:o(()=>[...e[22]||(e[22]=[f("ğŸ—‘ï¸ åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ee,U.value]]),p("div",xe,[a(Z,{"current-page":g.value,"onUpdate:currentPage":e[2]||(e[2]=t=>g.value=t),"page-size":h.value,"onUpdate:pageSize":e[3]||(e[3]=t=>h.value=t),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:$.value,onSizeChange:P,onCurrentChange:O,class:"security-pagination"},null,8,["current-page","page-size","total"])]),a(k,{modelValue:V.value,"onUpdate:modelValue":e[9]||(e[9]=t=>V.value=t),title:"æ·»åŠ æ–°ç”¨æˆ·",width:"500",class:"security-dialog"},{footer:o(()=>[p("span",De,[a(u,{onClick:e[8]||(e[8]=t=>V.value=!1),class:"cancel-btn"},{default:o(()=>[...e[23]||(e[23]=[f("å–æ¶ˆ",-1)])]),_:1}),a(u,{type:"primary",onClick:R,class:"confirm-btn"},{default:o(()=>[...e[24]||(e[24]=[f("ç¡®è®¤æ·»åŠ ",-1)])]),_:1})])]),default:o(()=>[a(B,{model:n.value,"label-width":"100px","label-position":"left"},{default:o(()=>[a(c,{label:"ç”¨æˆ·å",required:""},{default:o(()=>[a(d,{modelValue:n.value.username,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.username=t),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å"},null,8,["modelValue"])]),_:1}),a(c,{label:"é‚®ç®±",required:""},{default:o(()=>[a(d,{modelValue:n.value.email,"onUpdate:modelValue":e[5]||(e[5]=t=>n.value.email=t),placeholder:"è¯·è¾“å…¥é‚®ç®±"},null,8,["modelValue"])]),_:1}),a(c,{label:"å¯†ç ",required:""},{default:o(()=>[a(d,{modelValue:n.value.password,"onUpdate:modelValue":e[6]||(e[6]=t=>n.value.password=t),type:"password","show-password":"",placeholder:"è¯·è¾“å…¥å¯†ç "},null,8,["modelValue"]),p("div",ke,[p("span",{class:D({weak:x.value==="weak"})},"å¼±",2),p("span",{class:D({medium:x.value==="medium"})},"ä¸­",2),p("span",{class:D({strong:x.value==="strong"})},"å¼º",2)])]),_:1}),a(c,{label:"è§’è‰²",required:""},{default:o(()=>[a(q,{modelValue:n.value.role,"onUpdate:modelValue":e[7]||(e[7]=t=>n.value.role=t),placeholder:"è¯·é€‰æ‹©è§’è‰²"},{default:o(()=>[a(b,{label:"ç®¡ç†å‘˜",value:"admin"}),a(b,{label:"æ“ä½œå‘˜",value:"operator"}),a(b,{label:"å®¡è®¡å‘˜",value:"auditor"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(k,{modelValue:y.value,"onUpdate:modelValue":e[16]||(e[16]=t=>y.value=t),title:"ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯",width:"500",class:"security-dialog"},{footer:o(()=>[p("span",Ee,[a(u,{onClick:e[15]||(e[15]=t=>y.value=!1),class:"cancel-btn"},{default:o(()=>[...e[25]||(e[25]=[f("å–æ¶ˆ",-1)])]),_:1}),a(u,{type:"primary",onClick:J,class:"confirm-btn"},{default:o(()=>[...e[26]||(e[26]=[f("ç¡®è®¤ä¿®æ”¹",-1)])]),_:1})])]),default:o(()=>[a(B,{model:s.value,"label-width":"100px","label-position":"left"},{default:o(()=>[a(c,{label:"ç”¨æˆ·å"},{default:o(()=>[a(d,{modelValue:s.value.username,"onUpdate:modelValue":e[10]||(e[10]=t=>s.value.username=t),disabled:""},null,8,["modelValue"])]),_:1}),a(c,{label:"é‚®ç®±",required:""},{default:o(()=>[a(d,{modelValue:s.value.email,"onUpdate:modelValue":e[11]||(e[11]=t=>s.value.email=t),placeholder:"è¯·è¾“å…¥é‚®ç®±"},null,8,["modelValue"])]),_:1}),a(c,{label:"å¯†ç "},{default:o(()=>[a(d,{modelValue:s.value.password,"onUpdate:modelValue":e[12]||(e[12]=t=>s.value.password=t),type:"password","show-password":"",placeholder:"ç•™ç©ºåˆ™ä¸ä¿®æ”¹"},null,8,["modelValue"])]),_:1}),a(c,{label:"è§’è‰²",required:""},{default:o(()=>[a(q,{modelValue:s.value.role,"onUpdate:modelValue":e[13]||(e[13]=t=>s.value.role=t),placeholder:"è¯·é€‰æ‹©è§’è‰²"},{default:o(()=>[a(b,{label:"ç®¡ç†å‘˜",value:"admin"}),a(b,{label:"æ“ä½œå‘˜",value:"operator"}),a(b,{label:"å®¡è®¡å‘˜",value:"auditor"})]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"çŠ¶æ€",required:""},{default:o(()=>[a(M,{modelValue:s.value.status,"onUpdate:modelValue":e[14]||(e[14]=t=>s.value.status=t),"active-value":"active","inactive-value":"inactive","active-text":"å¯ç”¨","inactive-text":"ç¦ç”¨"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(k,{modelValue:L.value,"onUpdate:modelValue":e[17]||(e[17]=t=>L.value=t),title:"å®‰å…¨å®¡è®¡æ—¥å¿—",width:"700",class:"audit-log-dialog"},{default:o(()=>[a(T,{data:S.value,border:"",style:{width:"100%"}},{default:o(()=>[a(r,{prop:"time",label:"æ—¶é—´",width:"150"}),a(r,{prop:"action",label:"æ“ä½œ",width:"120"}),a(r,{prop:"operator",label:"æ“ä½œäºº",width:"120"}),a(r,{prop:"target",label:"ç›®æ ‡ç”¨æˆ·",width:"120"}),a(r,{prop:"details",label:"è¯¦ç»†ä¿¡æ¯"})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},Ke=ae(Le,[["__scopeId","data-v-69130d65"]]);export{Ke as default};
