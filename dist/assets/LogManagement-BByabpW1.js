import{_ as te}from"./_plugin-vue_export-helper--ScQKs0c.js";/* empty css                   *//* empty css                       *//* empty css                   *//* empty css                             *//* empty css                        *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                *//* empty css                     *//* empty css                             */import{a as le,r as p,m as ae,z as oe,c as ne,o as Y,e as t,w as l,E as se,f as ie,d as m,g as re,h as de,J as ue,K as pe,T as ce,i as me,j as ge,k as n,U as fe,H as ve,L as _e,M as be,N as ye,D as v,X as we,O as Ce,P as he,Q as ke,F as Me,Z as Ve,_ as De,l as U}from"./index-Dr9TPxTp.js";const Ee={class:"log-management-container"},xe={class:"search-form"},Se={class:"table-header"},$e={class:"table-actions"},Le={class:"pagination-container"},Te={class:"log-detail"},Ie={class:"log-content"},Ue={class:"export-options"},ze={__name:"LogManagement",setup(Re){const s=le({type:"",dateRange:[],keyword:""}),L=p([]),T=p(!1),C=p(1),h=p(10),z=p(0),k=p([]),S=p(!1),g=p({}),M=p(!1),I=p("csv"),V=p("current"),R=ae(()=>k.value.length>0),B=a=>({system:"",security:"danger",operation:"warning",network:"success"})[a]||"",P=a=>({system:"系统日志",security:"安全日志",operation:"操作日志",network:"网络日志"})[a]||"未知类型",N=()=>{const a=["system","security","operation","network"],e=["admin","user1","user2","operator","auditor"],d=["192.168.1.1","10.0.0.1","172.16.0.1","192.168.0.100"],_=["登录系统","修改密码","访问敏感数据","配置网络参数","系统重启","防火墙规则更新","用户权限变更","安全策略调整"],i=[];for(let u=1;u<=50;u++){const b=a[Math.floor(Math.random()*a.length)],r=e[Math.floor(Math.random()*e.length)],E=d[Math.floor(Math.random()*d.length)],x=_[Math.floor(Math.random()*_.length)],c=Math.floor(Math.random()*72),$=Math.floor(Math.random()*60),f=new Date;f.setHours(f.getHours()-c),f.setMinutes(f.getMinutes()-$),i.push({id:u,type:b,content:`${r} ${x}`,ip:E,time:f.toLocaleString(),user:r,fullContent:`详细日志内容：用户 ${r} (IP: ${E}) 于 ${f.toLocaleString()} ${x}。此操作${b==="security"?"涉及安全变更":"为常规操作"}。`})}return i},D=()=>{T.value=!0,setTimeout(()=>{let e=[...N()];if(s.type&&(e=e.filter(i=>i.type===s.type)),s.dateRange&&s.dateRange.length===2){const[i,u]=s.dateRange;e=e.filter(b=>{const r=new Date(b.time).toISOString().split("T")[0];return r>=i&&r<=u})}if(s.keyword){const i=s.keyword.toLowerCase();e=e.filter(u=>u.content.toLowerCase().includes(i)||u.user.toLowerCase().includes(i)||u.ip.includes(i))}z.value=e.length;const d=(C.value-1)*h.value,_=d+h.value;L.value=e.slice(d,_),T.value=!1},500)},F=()=>{C.value=1,D()},H=()=>{s.type="",s.dateRange=[],s.keyword="",F()},A=a=>{h.value=a,D()},J=a=>{C.value=a,D()},G=a=>{k.value=a},K=a=>{g.value={...a,content:a.fullContent},S.value=!0},Q=()=>{M.value=!0},X=()=>{M.value=!1;let a=[];V.value==="current"?a=L.value:V.value==="all"?a=N():V.value==="selected"&&(a=k.value);const e=I.value,d=a.length;U.success(`成功导出${d}条日志数据，格式为${e.toUpperCase()}`),console.log("导出数据:",{format:e,data:a})},Z=()=>{De.confirm("确定要删除选中的日志吗？此操作将永久删除日志记录且不可恢复！","警告",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning",customClass:"delete-confirm-dialog"}).then(()=>{const a=k.value.map(e=>e.id).join(",");console.log(`删除日志ID: ${a}`),U.success(`成功删除${k.value.length}条日志记录`),D()}).catch(()=>{U.info("已取消删除操作")})};return oe(()=>{D()}),(a,e)=>{const d=pe,_=ue,i=de,u=ce,b=me,r=ge,E=re,x=se,c=be,$=ye,f=_e,q=Ce,y=ke,W=he,j=ie,w=Ve,O=Me,ee=we;return Y(),ne("div",Ee,[t(x,{class:"search-card",shadow:"hover"},{default:l(()=>[m("div",xe,[t(E,{inline:!0,model:s},{default:l(()=>[t(i,{label:"日志类型",class:"form-item-enhanced"},{default:l(()=>[t(_,{modelValue:s.type,"onUpdate:modelValue":e[0]||(e[0]=o=>s.type=o),placeholder:"请选择日志类型",clearable:""},{default:l(()=>[t(d,{label:"系统日志",value:"system"}),t(d,{label:"安全日志",value:"security"}),t(d,{label:"操作日志",value:"operation"}),t(d,{label:"网络日志",value:"network"})]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"时间范围",class:"form-item-enhanced"},{default:l(()=>[t(u,{modelValue:s.dateRange,"onUpdate:modelValue":e[1]||(e[1]=o=>s.dateRange=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(i,{label:"关键词",class:"form-item-enhanced"},{default:l(()=>[t(b,{modelValue:s.keyword,"onUpdate:modelValue":e[2]||(e[2]=o=>s.keyword=o),placeholder:"请输入关键词",clearable:""},null,8,["modelValue"])]),_:1}),t(i,{class:"form-item-enhanced"},{default:l(()=>[t(r,{type:"primary",onClick:F,class:"action-button"},{default:l(()=>[...e[11]||(e[11]=[n("查询",-1)])]),_:1}),t(r,{onClick:H,class:"action-button"},{default:l(()=>[...e[12]||(e[12]=[n("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),t(x,{class:"table-card",shadow:"hover"},{default:l(()=>[m("div",Se,[e[15]||(e[15]=m("div",{class:"table-title"},[m("span",{class:"title-icon"},"📊"),m("span",null,"日志列表")],-1)),m("div",$e,[t(r,{type:"primary",onClick:Q,class:"action-button"},{default:l(()=>[...e[13]||(e[13]=[n("导出日志",-1)])]),_:1}),t(r,{type:"danger",onClick:Z,disabled:!R.value,class:"action-button"},{default:l(()=>[...e[14]||(e[14]=[n("批量删除",-1)])]),_:1},8,["disabled"])])]),fe((Y(),ve(f,{data:L.value,border:"",style:{width:"100%"},onSelectionChange:G,class:"log-table"},{default:l(()=>[t(c,{type:"selection",width:"55"}),t(c,{prop:"id",label:"ID",width:"80"}),t(c,{prop:"type",label:"日志类型",width:"120"},{default:l(({row:o})=>[t($,{type:B(o.type),class:"log-tag"},{default:l(()=>[n(v(P(o.type)),1)]),_:2},1032,["type"])]),_:1}),t(c,{prop:"content",label:"日志内容","min-width":"200"}),t(c,{prop:"ip",label:"IP地址",width:"150"}),t(c,{prop:"time",label:"时间",width:"180"}),t(c,{prop:"user",label:"操作人",width:"120"}),t(c,{label:"操作",width:"120",fixed:"right"},{default:l(({row:o})=>[t(r,{size:"small",onClick:Be=>K(o),class:"detail-button"},{default:l(()=>[...e[16]||(e[16]=[n("详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ee,T.value]]),m("div",Le,[t(q,{"current-page":C.value,"onUpdate:currentPage":e[3]||(e[3]=o=>C.value=o),"page-size":h.value,"onUpdate:pageSize":e[4]||(e[4]=o=>h.value=o),"page-sizes":[10,20,50,100],total:z.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:A,onCurrentChange:J,class:"log-pagination"},null,8,["current-page","page-size","total"])])]),_:1}),t(j,{modelValue:S.value,"onUpdate:modelValue":e[6]||(e[6]=o=>S.value=o),title:"日志详情",width:"50%",class:"log-detail-dialog"},{footer:l(()=>[t(r,{onClick:e[5]||(e[5]=o=>S.value=!1),class:"action-button"},{default:l(()=>[...e[17]||(e[17]=[n("关闭",-1)])]),_:1})]),default:l(()=>[m("div",Te,[t(W,{column:1,border:"",class:"detail-descriptions"},{default:l(()=>[t(y,{label:"日志ID"},{default:l(()=>[n(v(g.value.id),1)]),_:1}),t(y,{label:"日志类型"},{default:l(()=>[t($,{type:B(g.value.type),class:"log-tag"},{default:l(()=>[n(v(P(g.value.type)),1)]),_:1},8,["type"])]),_:1}),t(y,{label:"IP地址"},{default:l(()=>[n(v(g.value.ip),1)]),_:1}),t(y,{label:"操作人"},{default:l(()=>[n(v(g.value.user),1)]),_:1}),t(y,{label:"操作时间"},{default:l(()=>[n(v(g.value.time),1)]),_:1}),t(y,{label:"详细内容"},{default:l(()=>[m("div",Ie,v(g.value.content),1)]),_:1})]),_:1})])]),_:1},8,["modelValue"]),t(j,{modelValue:M.value,"onUpdate:modelValue":e[10]||(e[10]=o=>M.value=o),title:"导出日志",width:"30%",class:"export-dialog"},{footer:l(()=>[t(r,{onClick:e[9]||(e[9]=o=>M.value=!1),class:"action-button"},{default:l(()=>[...e[24]||(e[24]=[n("取消",-1)])]),_:1}),t(r,{type:"primary",onClick:X,class:"action-button"},{default:l(()=>[...e[25]||(e[25]=[n("确认导出",-1)])]),_:1})]),default:l(()=>[m("div",Ue,[t(E,{"label-position":"top"},{default:l(()=>[t(i,{label:"导出格式"},{default:l(()=>[t(O,{modelValue:I.value,"onUpdate:modelValue":e[7]||(e[7]=o=>I.value=o)},{default:l(()=>[t(w,{label:"csv"},{default:l(()=>[...e[18]||(e[18]=[n("CSV",-1)])]),_:1}),t(w,{label:"excel"},{default:l(()=>[...e[19]||(e[19]=[n("Excel",-1)])]),_:1}),t(w,{label:"json"},{default:l(()=>[...e[20]||(e[20]=[n("JSON",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"导出范围"},{default:l(()=>[t(O,{modelValue:V.value,"onUpdate:modelValue":e[8]||(e[8]=o=>V.value=o)},{default:l(()=>[t(w,{label:"current"},{default:l(()=>[...e[21]||(e[21]=[n("当前页",-1)])]),_:1}),t(w,{label:"all"},{default:l(()=>[...e[22]||(e[22]=[n("全部数据",-1)])]),_:1}),t(w,{label:"selected",disabled:!R.value},{default:l(()=>[...e[23]||(e[23]=[n("选中项",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}},Ze=te(ze,[["__scopeId","data-v-ea531e09"]]);export{Ze as default};
